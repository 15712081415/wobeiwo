<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
<meta name="renderer" content="webkit"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<style>
  .main{
    margin: 50px auto;
  }
</style>
</head>
<body>
  <div class="main">
    <div>
      <label>最新电影：<textarea id="movie"></textarea></label>
    </div>
    <div>
      <label>最新连续剧：<textarea id="sitcom"></textarea></label>
    </div>
    <center>
      <button onclick="submit">提交</button>
    </center>
  </div>
</body>
<script type="text/javascript">
var siteUrl = location.hostname == 'www.wobeiwo.cn' ? '' : '/wordpress';
var url = siteUrl + '/wp-json/wp/v2/';
var updataID = [];
var articleData = {
	slug: 'mytest',
	title: '解读特朗普访陆行程 习大大以超高规格接待给足特朗普面子？',
	content: '中美交锋朝鲜和贸易 当台湾不再是习特议题还有戏唱吗？',
	name: '杀手不冷', // 标题名称
	status: 'publish', // 发布状态 publish, future, draft, pending, private
	type: 'post',
	date: '2017-11-05T10:07:46.847Z',
	date_gmt: '2017-11-05T10:07:46.847Z', // 发布时间
	author: 1, // 作者id
	comment_status: 'open', // 是否开放评论 open, closed
	featured_media: 13, // 特色图片id
	ping_status: 'closed',
	sticky: false, // 置顶
	meta: [],
	categories: [1], // 分类id
	tags: [4] // 标签id
};
function submit () {
  var movie = document.getElementById('movie').value
  var sitcom = document.getElementById('sitcom').value
  if (movie == '' || sitcom == '') {
    return;
  }
  movie = JSON.parse(movie);
  sitcom = JSON.parse(sitcom);
  var nub = 0;
  function for_Each() {
    $.ajax({
      type: 'POST',
      url: url,
      data: articleData,
      success: function success (res) {
        nub++
        callback(res)
      },
      dataType: 'json'
    });
    
  }
  function callback (res) {
      setTimeout(function () {
        if (nub < 20) for_Each()
      }, 1000)
  }
}
</script>
</html>